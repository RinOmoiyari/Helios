{% extends 'Icarus/base.html' %}

{% block content %}
        <h1>Icarus - Work Request: {{ wrequest.pk }}
        <a href="{% url 'WR_edit' pk=wrequest.pk %}">
          <button type="button" class="btn btn-outline-primary btn-sm">Edit</button>
        </a></h1>
        <table class="table table-striped WR">
          <thead class="black">
            <tr>
              <th>WRID</th>
              <th>Title</th>
              <th>Process Flow</th>
              <th>Created By</th>
              <th>Created On</th>
          </thead>
          <tbody>
            <tr>
              <td>{{ wrequest.pk }}</td>
              <td>{{ wrequest.summary }}</td>
              <td>{{ wrequest.fk_flow }} (<a href="{% url 'PF_detail' pk=wrequest.fk_flow.pk %}">view</a>)</td>
              <td>{{ wrequest.create_by }}</td>
              <td>{{ wrequest.create_date }}</td>
            </tr>
            <tr>
              <td colspan="4">{{ wrequest.description }}</td>
            </tr>
          </tbody>
        </table>

        <h2>Related Tasks
          <a href="{% url 'Task_new' wrequest.pk %}">
            <button type="button" class="btn btn-outline-primary btn-sm">New</button>
          </a>
          <a href="{% url 'Task_initialtasks' wrequest.pk wrequest.fk_flow.pk %}">
            <button type="button" class="btn btn-outline-primary btn-sm">Create Initial Tasks</button>
          </a>
        </h2>
        <table class="table table-striped Tasks">
          <thead class="black">
            <tr>
              <th>TID</th>
              <th>Status</th>
              <th>Title</th>
              <th>Assigned To</th>
              <th>Role</th>
          </thead>
          <tbody>
            {% for task in tasks %}
            <tr>
              <td>{{ task.pk }}</td>
              <td>{{ task.get_status_display }}</td>
              <td><a href="{% url 'Task_detail' pk=task.pk %}">{{ task.name }}</a></td>
              <td>{{ task.assigned_to }}</td>
              <td>{{ task.role }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

{% endblock %}
